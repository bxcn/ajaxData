!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define(function(n,o,r){return t(e)}):"object"==typeof exports?module.exports=t():e.fetchData=t(e)}("undefined"!=typeof window?window:this,function(e){"use strict";function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(){function e(){o(this,e),this.fetchData=null}return r(e,[{key:"postAjax",value:function(e){var t=e.data||"";return fetch(e.url,{method:"post",headers:{"Content-Type":"application/json"},body:t})}},{key:"getAjax",value:function(e){console.log("getAjax");var t=e.data||"",n=e.url;return n=n.indexOf("?")>-1?n+"&"+t:n+"?"+t,fetch(n,{method:"get",headers:{"Content-Type":"application/json"}}).catch(function(t){console.log("fetch地址请求无效:"+e.url)})}},{key:"post",value:function(e){return this.fetchData=this.postAjax(e),this}},{key:"get",value:function(e){return this.fetchData=this.getAjax(e),this}},{key:"done",value:function(e){return this.fetchData.then(e),this}},{key:"then",value:function(e){return this.fetchData.then(e),this}},{key:"fail",value:function(e){return this.fetchData.catch(e),this}},{key:"catch",value:function(e){return this.fail(e),this}}]),e}(),i=function(e){function u(e){o(this,u);var n=t(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return n.defaults={beforeSend:function(){},complete:function(){},success:function(){},error:function(){}},n.defaults=Object.assign(n.defaults,e),n}return n(u,e),r(u,[{key:"status",value:function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(new Error(e.statusText))}},{key:"beforeSend",value:function(){this.defaults.beforeSend(),console.log("beforeSend")}},{key:"complete",value:function(){this.defaults.complete(),console.log("complete")}},{key:"success",value:function(){this.defaults.success(),console.log("success")}},{key:"error",value:function(){this.defaults.error(),console.log("error")}},{key:"json",value:function(e){return e.json()}},{key:"wrapper",value:function(e){var t=this,n=e.then(t.status).then(t.json).catch(function(e){t.error()});return this.success(),n}},{key:"post",value:function(e){return this.beforeSend(),this.fetchData=this.wrapper(this.postAjax(e)),this.complete(),this}},{key:"get",value:function(e){return this.beforeSend(),this.fetchData=this.wrapper(this.getAjax(e)),this.complete(),this}}]),u}(u),s={get:function(e){return new i(e).get(e)},post:function(e){return new i(e).post(e)}};return e.fetchData=s,s});