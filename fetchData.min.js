!function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(function(n,r,o){return e(t)}):"object"==typeof exports?module.exports=e():t.fetchData=e(t)}("undefined"!=typeof window?window:this,function(t){"use strict";function e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.fetchData=null}return o(t,[{key:"postAjax",value:function(t){var e=t.data||"";return fetch(t.url,{method:"post",headers:{"Content-Type":"application/json"},body:e})}},{key:"getAjax",value:function(t){var e=t.data||"",n=t.url;return n=n.indexOf("?")>-1?n+"&"+e:n+"?"+e,fetch(n,{method:"get",headers:{"Content-Type":"application/json"}}).catch(function(e){console.log("fetch地址请求无效:"+t.url)})}},{key:"post",value:function(t){return this.fetchData=this.postAjax(t),this}},{key:"get",value:function(t){return this.fetchData=this.getAjax(t),this}},{key:"done",value:function(t){return this.fetchData.then(t),this}},{key:"then",value:function(t){return this.fetchData.then(t),this}},{key:"fail",value:function(t){return this.fetchData.catch(t),this}},{key:"catch",value:function(t){return this.fail(t),this}}]),t}(),u=function(t){function i(){return r(this,i),e(this,(i.__proto__||Object.getPrototypeOf(i)).call(this))}return n(i,t),o(i,[{key:"status",value:function(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(new Error(t.statusText))}},{key:"json",value:function(t){return t.json()}},{key:"wrapper",value:function(t){var e=this;return t.then(e.status).then(e.json)}},{key:"post",value:function(t){return this.fetchData=this.wrapper(this.postAjax(t)),this}},{key:"get",value:function(t){return this.fetchData=this.wrapper(this.getAjax(t)),this}}]),i}(i),a={get:function(t){return(new u).get(t)},post:function(t){return(new u).post(t)}};return t.fetchData=a,a});